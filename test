<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<wf:definition xmlns:wf="http://workflow.opencastproject.org">
    <wf:id>schedule-and-upload-all-resolutions-with-name</wf:id>
    <wf:title>Process upon upload and schedule (all resolutions)</wf:title>
    <wf:tags>
        <wf:tag>schedule</wf:tag>
        <wf:tag>upload</wf:tag>
    </wf:tags>
    <wf:description></wf:description>
    <wf:published>false</wf:published>
    <wf:configuration_panel>

        &lt;div id="workflow-configuration"&gt;

        &lt;fieldset&gt;
        &lt;legend&gt;Video Qualities&lt;/legend&gt;
        &lt;ul&gt;
        &lt;li&gt;
        &lt;input id="flagQuality360p" name="flagQuality360p" type="checkbox" class="configField" value="false" /&gt;
        &lt;label for="flagQuality360p"&gt;360p resolution&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="flagQuality480p" name="flagQuality480p" type="checkbox" class="configField" value="false" /&gt;
        &lt;label for="flagQuality480p"&gt;480p resolution&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="flagQuality720p" name="flagQuality720p" type="checkbox" class="configField" value="true"
        checked="checked"/&gt;
        &lt;label for="flagQuality720p"&gt;720p resolution (HDready)&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="flagQuality1080p" name="flagQuality1080p" type="checkbox" class="configField" value="false" /&gt;
        &lt;label for="flagQuality1080p"&gt;1080p resolution (FullHD)&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="flagQuality2160p" name="flagQuality2160p" type="checkbox" class="configField" value="false" /&gt;
        &lt;label for="flagQuality2160p"&gt;2160p resolution (UltraHD)&lt;/label&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/fieldset&gt;
        &lt;fieldset&gt;
        &lt;legend&gt;Add a comment that the recording needs:&lt;/legend&gt;
        &lt;ul&gt;
        &lt;li&gt;
        &lt;input id="flagForCutting" name="flagForCutting" type="checkbox" class="configField" value="true" /&gt;
        &lt;label for="flagForCutting"&gt;Cutting&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="flagForReview" name="flagForReview" type="checkbox" class="configField" value="true" /&gt;
        &lt;label for="flagForReview"&gt;Review&lt;/label&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/fieldset&gt;
        &lt;fieldset&gt;
        &lt;legend&gt;After upload and ingest:&lt;/legend&gt;
        &lt;ul&gt;
        &lt;li&gt;
        &lt;input id="holdOrPublishToggle_hold" type="radio" name="holdOrPublishToggle" value="hold" /&gt;
        &lt;label for="holdOrPublishToggle_hold"&gt;Hold&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="holdOrPublishToggle_publish" type="radio" name="holdOrPublishToggle" value="publish"
        checked="checked" /&gt;
        &lt;label for="holdOrPublishToggle_publish"&gt;Publish right away to&lt;/label&gt;
        &lt;ul id="publicationConfigurationPanel" class="workflow-configuration-subpanel"&gt;
        &lt;li&gt;
        &lt;input id="publishToSearch" name="publishToSearch" type="checkbox" checked="checked" class="configField"
        value="true" /&gt;
        &lt;label for="publishToSearch"&gt;Opencast Index&lt;/label&gt;
        &lt;fieldset&gt;
        &lt;ul id="searchConfigurationPanel" class="workflow-configuration-subpanel"&gt;
        &lt;li&gt;
        &lt;input id="publishToEngage" name="searchPublishType" type="radio" checked="checked" class="configField"
        value="true" /&gt;
        &lt;label for="publishToEngage"&gt;Opencast Media Module&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="publishToAws" name="searchPublishType" type="radio" class="configField" value="true"/&gt;
        &lt;label for="publishToAws"&gt;AWS&lt;/label&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/fieldset&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="publishToApi" name="publishToApi" type="checkbox" checked="checked" class="configField"
        value="true" /&gt;
        &lt;label for="publishToApi"&gt;External Applications&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="publishToOaiPmh" name="publishToOaiPmh" type="checkbox" checked="checked" class="configField"
        value="true" /&gt;
        &lt;label for="publishToOaiPmh"&gt;OAI-PMH Default Repository&lt;/label&gt;
        &lt;/li&gt;
        &lt;li&gt;
        &lt;input id="publishToYouTube" name="publishToYouTube" type="checkbox" class="configField" value="true"
        disabled="disabled" /&gt;
        &lt;label for="publishToYouTube"&gt;YouTube&lt;/label&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;!-- Place to keep the hold vs. publication state --&gt;
        &lt;input type="hidden" id="straightToPublishing" class="configField" value="true" /&gt;
        &lt;/fieldset&gt;
        &lt;fieldset&gt;
        &lt;legend&gt;Publish live stream:&lt;/legend&gt;
        &lt;ul&gt;
        &lt;li&gt;
        &lt;input id="publishLive" name="publishLive" type="checkbox" class="configField" value="false" /&gt;
        &lt;label for=publishLive&gt;Add live event to Opencast Media Module&lt;/label&gt;
        &lt;/li&gt;
        &lt;/ul&gt;
        &lt;/fieldset&gt;
        &lt;/div&gt;

        &lt;!-- Show or hide the hold and publication configuration panel --&gt;
        &lt;script type="text/javascript"&gt;
        $('input[name="holdOrPublishToggle"]').change(function(){
        var show = $(this).val() == 'publish';
        $('#publicationConfigurationPanel').toggle(show);
        $('#straightToPublishing').val(show);
        });

        &lt;!-- Remove the line below if you wish to publish to AWS S3 --&gt;
        $('#publishToAws').prop('disabled', true);
        &lt;!-- Remove the line above if you wish to publish to AWS S3 --&gt;

        awsWasDisabled = $('#publishToAws').prop('disabled');
        awsWasChecked = $('#publishToAws').prop('checked');
        engageWasChecked = $('#publishToEngage').prop('checked');

        $('input[name="publishToSearch"]').change(function(){
        if ($(this).is(':checked')) {
        $('#publishToAws').prop('checked', awsWasChecked);
        $('#publishToEngage').prop('checked', engageWasChecked);
        $('#publishToAws').prop('disabled', awsWasDisabled);
        $('#publishToEngage').prop('disabled', false);
        } else if (!$(this).is(':checked')) {
        awsWasChecked = $('#publishToAws').prop('checked');
        engageWasChecked = $('#publishToEngage').prop('checked');

        $('#publishToAws').prop('disabled', true);
        $('#publishToEngage').prop('disabled', true);
        $('#publishToAws').prop('checked', false);
        $('#publishToEngage').prop('checked', false);
        }
        });
        &lt;/script&gt;

    </wf:configuration_panel>
    <wf:operations>
        <wf:operation id="defaults" description="Applying default configuration values" fail-on-error="true"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="publishToYouTube">false</wf:configuration>
                <wf:configuration key="publishToApi">true</wf:configuration>
                <wf:configuration key="straightToPublishing">true</wf:configuration>
                <wf:configuration key="publishLive">false</wf:configuration>
                <wf:configuration key="publishToOaiPmh">true</wf:configuration>
                <wf:configuration key="flagQuality1080p">true</wf:configuration>
                <wf:configuration key="publishToEngage">true</wf:configuration>
                <wf:configuration key="flagQuality360p">true</wf:configuration>
                <wf:configuration key="flagQuality480p">true</wf:configuration>
                <wf:configuration key="flagForCutting">false</wf:configuration>
                <wf:configuration key="flagQuality720p">true</wf:configuration>
                <wf:configuration key="flagForReview">false</wf:configuration>
                <wf:configuration key="uploadedSearchPreview">false</wf:configuration>
                <wf:configuration key="flagQuality2160p">true</wf:configuration>
                <wf:configuration key="publishToAws">false</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="export-wf-properties" description="Export workflow settings to Java properties file"
                      fail-on-error="true" exception-handler-workflow="partial-error" max-attempts="1"
                      retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="target-flavor">processing/defaults</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="include" description="Finalize upload and ingest" fail-on-error="true" max-attempts="1"
                      retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="workflow-id">partial-ingest</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="snapshot" description="Archive raw recording after ingest" fail-on-error="true"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="source-tags">archive</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="include" description="Prepare the recording for further processing" fail-on-error="true"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="workflow-id">partial-work</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="include" description="Prepare preview versions of the recording" fail-on-error="true"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="workflow-id">partial-preview</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="snapshot" description="Archive preview information" fail-on-error="true" max-attempts="1"
                      retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="source-tags">archive</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="comment" description="Mark the recording for cutting" fail-on-error="true"
                      if="${flagForCutting}" max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="reason">EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.CUTTING</wf:configuration>
                <wf:configuration key="action">create</wf:configuration>
                <wf:configuration key="description">Recording has not been cut yet.</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="comment" description="Mark the recording for review" fail-on-error="true"
                      if="${flagForReview}" max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="reason">EVENTS.EVENTS.DETAILS.COMMENTS.REASONS.REVIEW</wf:configuration>
                <wf:configuration key="action">create</wf:configuration>
                <wf:configuration key="description">Recording has not been reviewed yet.</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="include" description="Publish the recording" fail-on-error="true" if="${straightToPublishing}"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="workflow-id">partial-publish</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="snapshot" description="Archive publishing information" fail-on-error="true"
                      if="${straightToPublishing}" max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="source-tags">archive</wf:configuration>
            </wf:configurations>
        </wf:operation>
        <wf:operation id="include" description="Remove temporary processing artifacts" fail-on-error="true"
                      max-attempts="1" retry-strategy="none">
            <wf:configurations>
                <wf:configuration key="workflow-id">partial-cleanup</wf:configuration>
            </wf:configurations>
        </wf:operation>
    </wf:operations>
</wf:definition>